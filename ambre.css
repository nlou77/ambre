@import "css/competence.css";
@import "css/theme.css";
@import "css/pouvoir.css";
@import "css/editor.css";
@import "css/actorDescription.css";
@import "css/possessions.css";
@import "css/atouts.css";
@import "css/ombres.css";
@import "css/artefacts.css";
@import "css/creatures.css";
@import "css/mesatouts.css";
@import "css/voiesecrete.css";
@import "css/pnj.css";

/* ===== THEME VARIABLES ===== */

.form-group input, .calculated-field {
    background: var(--theme-background-alt) !important;
    color: var(--theme-primary-color) !important;
    border-color: var(--theme-primary-color) !important;
}

/* Configuration de base pour les images et éléments généraux */
#pause > img {
    content: url("../../systems/ambre/assets/ambre-circle-with-text.png");
    width: 200px;
    height: 200px;
    top: -80px;
    left: calc(50% - 80px);
}

/* Classes utilitaires */
.center {
    justify-content: center;
}

.description {
    margin-top: 10px;
    margin-left: 5px;
    margin-right: 5px;
    font-family: 'AJensonProLtDisp';
    font-size: 15px;
}

.description .add {
    color: var(--theme-primary-color);
    font-weight: bold;
    text-align: center;
    position: relative;
    top: 30px;
}

.table-center {
    text-align: center;
    font-weight: bold;
}

.column-2 {
    column-count: 2;
}

.flexrow-start {
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
}

.no-display {
    display: none;
}

.no-vertical-margin {
    margin-top: 0px;
    margin-bottom: 0px;
}

.mborder {
    border-width: 2px;
}

.mtop {
    margin-top: 10px;
}

.mbottom {
    margin-bottom: 10px;
}

.mright {
    margin-right: 10px;
}

.pleft {
    padding-left: 10px;
}

.hidden {
    visibility: hidden;
}

.indianred {
    color: var(--theme-primary-color);
}

.grey {
    color: var(--theme-text-grey);
}

.hoverable:hover {
    text-shadow: 0 0 10px var(--theme-primary-color);
    color: var(--theme-primary-color);
}

.item-name-clickable {
    cursor: pointer;
    transition: color 0.2s ease, text-shadow 0.2s ease;
}

.item-name-clickable:hover {
    color: var(--theme-primary-dark);
    text-shadow: 0 0 2px var(--theme-primary-shadow);
}

.selector-disabled {
    appearance: none;
    background-color: transparent;
    border: none;
    text-align: center;
    font-weight: normal;
}

.selector-disabled:disabled {
    color: var(--theme-text-secondary);
}
/*
    border-color: var(--theme-error-color);
    box-shadow: 0 0 5px var(--theme-error-shadow);
}

/* Add a warning message for out of range values */
.form-group {
    position: relative;
}

.form-group input[type="number"]:invalid::after {
    content: "Valeur entre 0 et 999";
    position: absolute;
    top: 100%;
    left: 0;
    font-size: 11px;
    color: var(--theme-error-color);
    font-style: italic;
}

/* Checkboxes personnalisées */
.dommage-checkbox {
    font-style: italic;
    padding-top: 4px;
    margin-left: 3px;
    margin-right: 3px;
}

.dommage-checkbox input[type="checkbox"] {
    display: none;
}

.dommage-checkbox .checked {
    display: none;
}

.dommage-checkbox input[type="checkbox"]:checked ~ .checked {
    display: inline-block;
}

.dommage-checkbox input[type="checkbox"]:checked ~ .unchecked {
    display: none;
}

.hand-checkbox {
    font-style: italic;
    margin-left: 22px;
    margin-right: 20px;
}

.hand-checkbox input[type="checkbox"] {
    display: none;
}

.hand-checkbox .checked {
    display: none;
}

.hand-checkbox input[type="checkbox"]:checked ~ .checked {
    display: inline-block;
}

.hand-checkbox input[type="checkbox"]:checked ~ .unchecked {
    display: none;
}

.circle {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    line-height: 0;
    position: relative;
    background: var(--theme-shadow-color);
    border: 1px solid var(--theme-border-dark);
    flex-basis: 40px;
    flex-grow: 0;
    flex-shrink: 0;
}

.circle::after {
    content: "";
    display: block;
    padding-bottom: 100%;
}

.section {
    margin-bottom: 10px;
}

/* Thème Marelle (Default) */
.skin-marelle {
    background: var(--theme-background);
    color: var(--theme-text-light);
}

/* Structure principale de la feuille d'acteur */
.actor .window-content {
    background: var(--theme-background);
    background-blend-mode: lighten;
    color: var(--theme-text-color);
    width: 100%;
    height: 100%;
    display: flex; /* Added */
    flex-direction: column; /* Added */
}

.actor.sheet form {
    display: flex;
    flex-direction: column;
    height: 100%;
    overflow: hidden; /* Prevent form from causing double scrollbars */
}

.actor .window-content .actor-root {
    display: flex;
    flex-direction: column;
    width: 100%;
    height: 100%;
}

/* Sheet Header - should not grow or shrink */
.actor .sheet-header {
    flex-shrink: 0;
    padding: 15px 20px; /* Add some padding */
    text-align: center; /* Center the h1 block */
    border-bottom: 2px solid var(--theme-primary-color); /* Optional: a bottom border */
    margin-bottom: 10px; /* Space below the header */
    position: relative; /* For positioning the banner */
    overflow: hidden; /* To contain the banner if it's larger than the header area */
}

.actor .sheet-header h1 {
    margin: 0; /* Remove default h1 margin */
    font-family: var(--theme-font-header, "Georgia", serif); /* Use theme header font with a fallback */
    font-size: var(--theme-font-size-xxlarge, 2.5em); /* Use a theme variable or a large size */
    font-weight: bold; /* Or var(--theme-font-weight-header) */
    color: var(--theme-primary-color); /* Use theme primary color */
    text-transform: uppercase; /* Optional: for a more prominent look */
    letter-spacing: 1px; /* Optional: adjust letter spacing */
    line-height: 1.2;
    position: relative; /* To ensure it's above the banner */
    z-index: 1; /* Above the banner */
}

.actor .sheet-header h1 input[type="text"] {
    font-family: inherit; /* Inherit h1's font family */
    font-size: inherit; /* Inherit h1's font size */
    font-weight: inherit; /* Inherit h1's font weight */
    color: inherit; /* Inherit h1's text color */
    text-transform: inherit; /* Inherit h1's text transform */
    letter-spacing: inherit; /* Inherit h1's letter spacing */
    line-height: inherit; /* Inherit h1's line height */
    
    background-color: transparent; /* Make input background transparent */
    border: none; /* Remove default input border */
    border-bottom: 2px dashed var(--theme-primary-light, #ccc); /* Subtle underline for editability */
    padding: 0 5px; /* Minimal padding */
    text-align: center; /* Center text within the input */
    width: auto; /* Allow input to size based on content, or set a specific width if needed */
    min-width: 200px; /* Ensure it's not too small */
    outline: none; /* Remove focus outline */
    position: relative; /* Ensure input is also above banner if h1 styles are complex */
    z-index: 1; /* Above the banner */
}

.actor .sheet-header .header-banner {
    position: absolute;
    top: 0; /* Align to the top of the header */
    left: 0;
    width: 100%;
    height: 100%; /* Make banner height same as parent header */
    object-fit: cover; /* Ensures the whole image is visible, may letterbox/pillarbox */
    object-position: center center; /* Adjust if you want to focus on top/bottom of banner */
    z-index: 0; /* Positioned behind the h1 and input */
    opacity: 0.8; /* Adjust for desired transparency (0.0 to 1.0) */
}


/* Horizontal Navigation Layout */
.horizontal-navigation {
    border-bottom: 2px solid var(--theme-primary-color);
    margin-bottom: 10px;
    overflow-x: auto;
    overflow-y: hidden;
    white-space: nowrap;
    width: 100%;
    flex-shrink: 0; /* Prevent tab navigation from shrinking */
}

.horizontal-navigation .sheet-navigation {
    display: flex;
    flex-direction: row;
    min-width: max-content;
    padding: 0 10px;
    width: 100%;
}

.horizontal-navigation .sheet-navigation-tab,
.horizontal-navigation .sheet-pouvoir-navigation-tab,
.horizontal-navigation .sheet-possessions-navigation-tab {
    flex: 1;
    padding: 10px 20px;
    margin-right: 5px;
    background: var(--theme-primary-light);
    border: 1px solid var(--theme-primary-color);
    border-bottom: none;
    border-radius: 8px 8px 0 0;
    cursor: pointer;
    transition: background-color 0.3s ease, color 0.3s ease, text-shadow 0.3s ease; /* More specific transitions */
    font-family: var(--theme-font-header, "Arial Black", Gadget, sans-serif); /* Standardized font */
    font-weight: bold;
    font-size: var(--theme-font-size-medium, 14px); /* Standardized size, adjust if too small/large */
    text-transform: uppercase;
    letter-spacing: 1px; /* Standardized spacing */
    color: var(--theme-primary-color); /* Default color */
    text-decoration: none;
    white-space: nowrap;
    text-align: center;
}

.horizontal-navigation .sheet-navigation-tab:hover,
.horizontal-navigation .sheet-pouvoir-navigation-tab:hover {
    background-color: var(--theme-primary-medium); /* Use background-color for clarity */
    text-shadow: 0 0 5px var(--theme-primary-color);
}

.horizontal-navigation .sheet-navigation-tab.active,
.horizontal-navigation .sheet-pouvoir-navigation-tab.active {
    background-color: var(--theme-primary-color); /* Use background-color for clarity */
    color: white;
    text-shadow: none;
}

/* Sheet Body - Full Width */
.sheet-body {
    width: 100%;
    height: calc(100% - 120px);
    overflow: hidden;
}

.sheet-body.horizontal-scroll {
    overflow-x: auto;
    overflow-y: auto;
    font-size: 14px;
    width: 100%;
    height: 100%;
}

/* Tab Content - Full Width */
.sheet-body .tab {
    width: 100%;
    height: auto; /* Allow tab to grow with content */
    padding: 0;
    margin: 0;
    display: none;
    box-sizing: border-box;
}

.sheet-body .tab.active {
    display: block;
    overflow: visible; /* Content should not be clipped by the tab div itself */
    height: auto;
}

/* Sheet Content - Consistent padding for ALL tabs */
.sheet-content {
    width: 100%;
    height: auto; /* Allow sheet-content to grow with its content */
    padding: 0px; /* Increased padding for wider sheet */
    box-sizing: border-box;
    overflow-y: visible; /* Remove individual scrollbar, parent will handle */
    overflow-x: visible; /* Allow horizontal overflow if necessary, though typically not desired here */
    padding-bottom: 15px; /* Add some bottom padding to prevent cut-off */
}

.tab[data-tab="caracteristiques"] .sheet-content {
    padding-left: 5px; /* Further reduced left padding for Caracteristiques tab */
}

.tab[data-tab="competences"] {
    height: auto !important;
    overflow: visible !important;
}


.tab[data-tab="competences"] .sheet-content {
    height: auto !important;
    max-height: none !important;
    overflow-y: auto !important;
    overflow-x: visible !important;
}

.tab[data-tab="caracteristiques"] .sheet-content h3 {
    margin: -25px -25px 20px -15px; /* Adjusted negative left margin for new padding-left */
    padding: 15px 25px 15px 15px; /* Adjusted left padding for h3 content */
    background-color: var(--theme-primary-light);
    border-bottom: 2px solid var(--theme-primary-color);
    font-family: var(--theme-font-header, "Arial Black", Gadget, sans-serif); /* Standardized */
    font-size: var(--theme-font-size-xlarge, 20px); /* Standardized */
    color: var(--theme-primary-color);
    text-transform: uppercase;
    letter-spacing: 1.5px; /* Standardized */
    text-align: center;
}

.three-column-layout {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 20px;
    align-items: start;
    width: 100%;
    height: auto;
    min-height: min-content;
    box-sizing: border-box;
    padding: 0; /* Remove padding since sheet-content provides it */
    margin: 0;
}

/* All columns should have the same layout structure */
.left-column,
.middle-column,
.right-column {
    display: flex;
    flex-direction: column;
    gap: 15px;
    width: 100%;
    height: auto;
    align-items: stretch; /* Ensure all items stretch to full width */
}

/* Actor image styling within the middle column structure */
.actor-image,
.embleme-image { /* Grouping for common styles */
    /* width: 100%; Removed, will be controlled by flex parent or specific context */
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center; /* Center content vertically */
    box-sizing: border-box;
    gap: 10px;
    background: rgba(44, 96, 109, 0.05);
    border-radius: 6px;
    padding: 15px;
    border: 1px solid rgba(44, 96, 109, 0.2);
}

.actor-image img,
.embleme-image img {
    /* Default image styling, will be overridden for the side-by-side case */
    width: 150px; /* Original fixed width */
    height: 150px; /* Original fixed height */
    object-fit: cover;
    border-radius: 8px;
    border: 2px solid #2C606D;
    cursor: pointer;
    transition: all 0.3s ease;
    display: block; /* Good practice for images */
}

.actor-image img:hover,
.embleme-image img:hover {
    border-color: #1a4a54;
    box-shadow: 0 0 10px rgba(44, 96, 109, 0.5);
}

/* New container for side-by-side actor and emblem images */
.actor-images-container {
    display: flex;
    flex-direction: column; /* Stack images vertically */
    gap: 10px; /* Space between actor image and emblem image blocks */
    width: 100%; /* Take full width of the middle column */
    height: auto;
}

/* Adjust actor-image and define embleme-image when inside the new container */
.actor-images-container .actor-image,
.actor-images-container .embleme-image {
    /* flex: 1; Removed - was for horizontal distribution */
    width: 100%; /* Ensure each block takes full width of the column container */
    padding: 10px; /* Adjust padding as needed for inside the block */
}

/* Make images responsive within their blocks in the side-by-side layout */
.actor-images-container .actor-image img,
.actor-images-container .embleme-image img {
    width: 100%; /* Image fills its parent block (.actor-image or .embleme-image) */
    height: auto; /* Maintain aspect ratio */
    aspect-ratio: 1 / 1; /* Makes the image square, adjust if needed */
}

.actor-image .image-label {
    font-family: 'AJensonPro';
    font-weight: bold;
    color: var(--theme-primary-color);
    font-size: 14px;
    text-align: center;
    margin-top: 5px;
}
/* Counter Icon Controls in Options Tab */
.counter-icon-controls {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin-top: 10px;
}

.counter-icon-row {
    display: flex;
    align-items: center;
    gap: 8px;
    justify-content: center; /* Center the row content */
}

.counter-icon-row label {
    font-weight: bold;
    color: var(--theme-primary-color);
    flex-basis: 120px; /* Give labels a fixed width */
    text-align: right;
    flex-shrink: 0;
}

.counter-icon-number-display {
    font-weight: bold;
    color: var(--theme-text-color);
    width: 80px; /* Fixed width for the display text */
    text-align: center;
}


/* Content Layouts - Full Width */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
    width: 100%;
    height: auto;
}

/* Pouvoirs Section - Three Column Layout */
.pouvoirs-section {
    background: var(--theme-background-alt);
    border: 2px solid var(--theme-primary-color);
    border-radius: 12px;
    padding: 25px; /* Increased padding for consistency */
    margin: 15px 0;
    box-shadow: 0 4px 8px var(--theme-primary-shadow);
    width: 100%;
}

.pouvoirs-section h3 {
    font-family: var(--theme-font-header);
    font-size: var(--theme-font-size-xlarge, 20px); /* Standardized */
    font-weight: bold;
    color: var(--theme-primary-color);
    text-transform: uppercase;
    letter-spacing: 1.5px; /* Standardized */
    margin-bottom: 20px; /* Consistent margin */
    text-align: center;
    padding-bottom: 10px;
    border-bottom: 1px solid var(--theme-primary-light);
}

.pouvoirs-container {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 12px;
    width: 100%;
}

.pouvoir-row {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 15px;
    border: 1px solid var(--theme-border-color);
    border-radius: 8px;
    background: var(--theme-background-light);
    transition: all 0.3s ease;
    cursor: pointer;
    width: 100%;
    box-sizing: border-box;
    min-height: 48px;
}

.pouvoir-row:hover {
    background: var(--theme-primary-light);
    border-color: var(--theme-primary-color);
    transform: translateY(-1px);
    box-shadow: 0 2px 6px var(--theme-primary-shadow);
}

.pouvoir-row input[type="checkbox"] ,
.pouvoir-row input[type="radio"]{
    appearance: none;
    width: 18px;
    height: 18px;
    border: 2px solid var(--theme-border-color);
    border-radius: 4px;
    background: var(--theme-background-light);
    cursor: pointer;
    position: relative;
    transition: all 0.3s ease;
    flex-shrink: 0;
    margin: 0; /* Reset default margins */
}

.pouvoir-row input[type="checkbox"] {
    border-radius: 4px; /* Square for checkbox */
}
.pouvoir-row input[type="radio"] {
    border-radius: 50%; /* Circular for radio */
}

.pouvoir-row input[type="checkbox"]:hover,
.pouvoir-row input[type="radio"]:hover {
    border-color: var(--theme-primary-color);
    background: var(--theme-primary-light);
}



.pouvoir-row input[type="checkbox"]:checked::after {
    content: '✓';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    font-size: 12px;
    font-weight: bold;
}
.pouvoir-row input[type="radio"]:checked {
    background: var(--theme-background-light); /* Keep outer circle light */
    border-color: var(--theme-primary-color);
}

.pouvoir-row input[type="radio"]:checked::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 10px; /* Size of the inner dot */
    height: 10px; /* Size of the inner dot */
    background-color: var(--theme-primary-color); /* Color of the inner dot */
    border-radius: 50%;
}

.pouvoir-row label {
    margin: 0;
    cursor: pointer;
    font-family: var(--theme-font-body);
    font-weight: 500;
    font-size: 14px;
    color: var(--theme-text-color);
    flex: 1;
    user-select: none;
    text-align: left;
    line-height: 1.2;
}

.pouvoir-row input[type="checkbox"]:checked + label,
.pouvoir-row input[type="radio"]:checked + label {
    font-weight: bold;
    color: var(--theme-primary-color);
}

.pouvoir-row:has(input[type="checkbox"]:checked),
.pouvoir-row:has(input[type="radio"]:checked) {
    background: var(--theme-primary-light);
    border-color: var(--theme-primary-color);
    border-width: 2px;
    box-shadow: 0 0 8px var(--theme-primary-shadow);
}

/* Focus states for accessibility */
.pouvoir-row input[type="checkbox"]:focus,
.pouvoir-row input[type="radio"]:focus {
    outline: 2px solid var(--theme-primary-color);
    outline-offset: 2px;
}

.pouvoir-row:focus-within {
    border-color: var(--theme-primary-color);
    box-shadow: 0 0 5px var(--theme-primary-shadow);
}

/* Animation for checkbox selection */
@keyframes checkboxSelect {
    0% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.1);
    }
    100% {
        transform: scale(1);
    }
}

.pouvoir-row input[type="checkbox"]:checked,
.pouvoir-row input[type="radio"]:checked { /* Apply animation to radio buttons too if desired */
    animation: checkboxSelect 0.3s ease;
}

/* Responsive design */
@media (max-width: 1024px) {
    .pouvoirs-container {
        grid-template-columns: 1fr 1fr;
        gap: 10px;
    }
}

@media (max-width: 768px) {
    .pouvoirs-container {
        grid-template-columns: 1fr;
        gap: 8px;
    }
    
    .pouvoir-row {
        padding: 10px 12px;
        min-height: 44px;
    }
    
    .pouvoir-row label {
        font-size: 13px;
    }
    
    .pouvoir-row input[type="checkbox"] {
        width: 16px;
        height: 16px;
    }
}

@media (max-width: 480px) {
    .pouvoirs-section {
        padding: 15px;
    }
    
    .pouvoir-row {
        padding: 8px 10px;
        gap: 8px;
    }
    
    .pouvoir-row label {
        font-size: 12px;
    }
}


.form-group {
    display: flex;
    flex-direction: column;
    gap: 5px;
    width: 100%;
    height: auto;
}

.form-group label {
    font-weight: bold;
    color: var(--theme-primary-color);
    font-size: 14px;
}

.form-group input {
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 4px;
    background: rgba(255, 255, 255, 0.8);
    width: 100%;
    box-sizing: border-box;
}

.form-group input:focus {
    border-color: var(--theme-primary-color);
    outline: none;
    box-shadow: 0 0 5px rgba(44, 96, 109, 0.3);
}

/* Inventory Section - Full Width */
.inventory-section {
    width: 100%;
    height: auto;
}

.inventory-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    padding: 10px;
    background: rgba(44, 96, 109, 0.1);
    border-radius: 6px;
    width: 100%;
    box-sizing: border-box;
}

.inventory-button {
    background: #2C606D;
    color: white;
    border: none;
    border-radius: 4px;
    padding: 5px 10px;
    cursor: pointer;
}

.inventory-list {
    width: 100%;
    height: auto;
}

.inventory-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px;
    border: 1px solid #ddd;
    border-radius: 4px;
    margin-bottom: 5px;
    width: 100%;
    box-sizing: border-box;
}

/* Description Section - Full Width */
.description-section {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 15px;
    width: 100%;
    height: auto;
}

.form-group.full-width {
    grid-column: 1 / -1;
    width: 100%;
}

/* Tab Management */
.sheet-navigation-tab {
    cursor: pointer;
    transition: all 0.3s ease;
}

.sheet-navigation-tab.active {
    background: var(--theme-background-alt);
    color: var(--theme-primary-color);
}

.tab {
    opacity: 0;
}

.tab.active {
    opacity: 1;
}

/* Responsive design */
@media (max-width: 768px) {
    .three-column-layout {
      grid-template-columns: 1fr;
      grid-template-rows: auto auto auto;
    }
  
    .middle-column {
      order: -1;
      padding: 0 0 20px 0;
    }
  
    .description-section {
      grid-template-columns: 1fr;
    }
  
    .stats-grid,
    .competences-list,
    .pouvoirs-section {
      grid-template-columns: 1fr;
    }
}

/* All stat components should have consistent styling */
.physique-component,
.endurance-component,
.psyche-component,
.perception-component,
.charisme-component,
.karma-component {
  border: 1px solid #2C606D;
  background: rgba(255, 255, 255, 0.9);
  transition: all 0.3s ease;
  width: 100px;
}

.physique-component:focus,
.endurance-component:focus,
.psyche-component:focus,
.perception-component:focus,
.charisme-component:focus,
.karma-component:focus {
  border-color: var(--theme-primary-color);
  box-shadow: 0 0 5px var(--theme-primary-shadow);
  outline: none;
}

/* Ensure all calculated fields look the same */
.calculated-field {
  background: var(--theme-background-alt) !important;
  color: var(--theme-primary-color) !important;
  font-weight: bold !important;
  font-size: 16px !important;
  text-align: center !important;
  cursor: not-allowed !important;
  border: 2px solid var(--theme-primary-color) !important;
}

/* All sub-characteristics sections should look the same */
.sub-characteristics {
  display: flex;
  flex-direction: column;
  gap: 15px;
  width: 100%;
  height: auto;
  background: var(--theme-background-alt);
  border-radius: 4px;
  padding: 10px;
  margin-bottom: 15px;
  margin-left: -10px;  /* Counteract parent .calculated-stat padding */
  margin-right: -10px; /* Counteract parent .calculated-stat padding */
  border-left: 3px solid var(--theme-primary-color);
}

.sub-characteristics .form-form {
  margin-bottom: 8px;
}

.sub-characteristics .form-group:last-child {
  margin-bottom: 0;
}

/* All calculated stat containers should look the same */
.calculated-stat {
  background: rgba(44, 96, 109, 0.1);
  border-radius: 6px;
  padding: 8px;
  margin-bottom: 10px;
  border: 2px solid #2C606D;
  align-content: left;
}

/* Styling for major characteristic labels (PHYSIQUE, ENDURANCE, etc.) */
.calculated-stat > label {
  display: block; /* Ensures the label takes full width for text-align: center */
  font-family: var(--theme-font-header, "Arial Black", Gadget, sans-serif); /* Using theme variable with a fallback */
  font-size: var(--theme-font-size-xlarge, 20px); /* Using a theme variable or a suitable size */
  font-weight: bold;
  color: var(--theme-primary-color);
  text-transform: uppercase;
  letter-spacing: 1.5px;
  text-align: center;
  margin-top: 10px; /* Added space above the label */
  margin-bottom: 10px; /* Space between label and the major stat line */
}

.calculated-stat label {
  font-size: 16px;
  font-weight: bold;
  color: var(--theme-primary-color);
  text-transform: uppercase;
}

.calculation-info {
  display: block;
  font-size: 11px;
  color: var(--theme-primary-color);
  font-style: italic;
  margin-top: 3px;
  text-align: center;
}

.ptscreation-component {
    border: 1px solid #2C606D;
    background: var(--theme-background-alt);
    color: var(--theme-primary-color);
}

.ptscreation-component:focus {
    border-color: var(--theme-primary-color);
    box-shadow: 0 0 5px var(--theme-primary-shadow);
}
/* Two Column Layout */
.two-column-layout {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  align-items: start;
  width: 100%;
  height: auto;
  box-sizing: border-box;
  margin: 0;
}

.two-column-layout .column {
  display: flex;
  flex-direction: column;
  gap: 15px;
  width: 100%;
  height: auto;
}

.force-component, 
.perception-component, 
.charisme-component, 
.endurance-component,
.psyche-component {
  border: 1px solid #2C606D;
  background: rgba(255, 255, 255, 0.9);
}

.force-component:focus, 
.perception-component:focus, 
.charisme-component:focus, 
.endurance-component:focus,
.psyche-component:focus {
  border-color: var(--theme-primary-color);
  box-shadow: 0 0 5px var(--theme-primary-shadow);
}

/* Responsive design for smaller screens */
@media (max-width: 768px) {
  .two-column-layout {
    grid-template-columns: 1fr;
    gap: 15px;
  }
}

/* Adjust the main two-column layout for the settings tab to make the left column fit its content */
#settings-main-content > .sheet-content > .two-column-layout { /* More specific selector */
    grid-template-columns: max-content 1fr; /* Left column fits content, right column takes remaining space */
}

/* Styling for the "Affichage des Capacités" fieldset, similar to .pouvoirs-section but smaller */
.capacites-display-settings {
    background: var(--theme-background-alt);
    border: 1px solid var(--theme-primary-color);
    border-radius: 8px; /* Smaller radius */
    padding: 15px; /* Reduced padding */
    margin-bottom: 15px;
}

.capacites-display-settings legend {
    font-family: var(--theme-font-header);
    font-size: 16px; /* Reduced from typical section headers */
    font-weight: bold;
    color: var(--theme-primary-color);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 10px; /* Reduced */
    text-align: center;
    padding-bottom: 8px; /* Reduced */
    border-bottom: 1px solid var(--theme-primary-light); /* Thinner */
    width: 100%; /* Ensure legend spans width for border and centering */
}

/* Container for the radio options, similar to .pouvoirs-container */
.capacites-display-settings .form-fields {
    display: flex;
    flex-direction: column; /* Stack the radio labels vertically */
    gap: 6px; /* Reduced gap between options */
    /* width: 100%; Removed, flex item takes width */
    padding: 0; /* Fieldset has padding now */
}

/* Each radio option row, similar to .pouvoir-row but smaller */
.capacites-display-settings .form-fields .radio-label {
    display: flex; /* Arrange children (input and span) horizontally */
    align-items: center; /* Vertically center the radio button and text */
    gap: 6px; /* Further reduced gap between radio and text */
    padding: 6px 8px; /* Further reduced padding */
    border: 1px solid var(--theme-border-color);
    border-radius: 6px; /* Slightly smaller radius */
    background: var(--theme-background-light);
    transition: all 0.2s ease;
    cursor: pointer;
    /* Each label will be on its own line due to the parent .form-fields being flex-direction: column */
}

.capacites-display-settings .form-fields .radio-label:hover {
    background: var(--theme-primary-light);
    border-color: var(--theme-primary-color);
}

/* Custom radio button styling, smaller */
.capacites-display-settings .form-fields .radio-label input[type="radio"] {
    appearance: none;
    width: 14px; /* Reduced from 18px */
    height: 14px; /* Reduced from 18px */
    border: 2px solid var(--theme-border-color);
    border-radius: 50%;
    background: var(--theme-background-light);
    cursor: pointer;
    position: relative;
    transition: all 0.2s ease;
    flex-shrink: 0; /* Prevent the radio button from shrinking */
    margin: 0; /* Use gap on parent for spacing */
}

.capacites-display-settings .form-fields .radio-label input[type="radio"]:hover {
    border-color: var(--theme-primary-color);
}

.capacites-display-settings .form-fields .radio-label input[type="radio"]:checked {
    background: var(--theme-background-light);
    border-color: var(--theme-primary-color);
}

.capacites-display-settings .form-fields .radio-label input[type="radio"]:checked::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 6px; /* Reduced dot size */
    height: 6px; /* Reduced dot size */
    background-color: var(--theme-primary-color);
    border-radius: 50%;
}

/* Styling for the text span, smaller font */
.capacites-display-settings .form-fields .radio-label span {
    font-family: var(--theme-font-body);
    font-weight: normal;
    font-size: 12px; /* Reduced font size */
    color: var(--theme-text-color);
    flex: 1; /* Allow text to take remaining space if wrapping */
    user-select: none;
    text-align: left; /* Ensure the label text is left-aligned */
    white-space: nowrap; /* Keep text on a single line */
}

.capacites-display-settings .form-fields .radio-label input[type="radio"]:checked + span {
    font-weight: bold;
    color: var(--theme-primary-color);
}

.capacites-display-settings .form-fields .radio-label:has(input[type="radio"]:checked) {
    background: var(--theme-primary-light);
    border-color: var(--theme-primary-color);
}

/* Focus states for accessibility */
.capacites-display-settings .form-fields .radio-label input[type="radio"]:focus {
    outline: 2px solid var(--theme-primary-color);
    outline-offset: 1px; /* Reduced offset */
}

/* Radio Group Styling */
.radio-group {
    display: flex;
    flex-direction: column;
    gap: 4px;
    width: 100%;
}

.radio-option {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    border: 1px solid var(--theme-border-color, #ccc);
    border-radius: 4px;
    background: var(--theme-background-alt, rgba(255, 255, 255, 0.8));
    transition: all 0.3s ease;
    cursor: pointer;
}

.radio-option:hover {
    background: var(--theme-primary-light, rgba(44, 96, 109, 0.1));
    border-color: var(--theme-primary-color, #2C606D);
}

.radio-option input[type="radio"] {
    margin: 0;
    cursor: pointer;
}

.radio-option label {
    margin: 0;
    cursor: pointer;
    font-weight: normal;
    color: var(--theme-text-color, #262925);
    flex: 1;
}

.radio-option input[type="radio"]:checked + label {
    font-weight: bold;
    color: var(--theme-primary-color, #2C606D);
}

.radio-option:has(input[type="radio"]:checked) {
    background: var(--theme-primary-light, rgba(44, 96, 109, 0.1));
    border-color: var(--theme-primary-color, #2C606D);
    box-shadow: 0 0 5px var(--theme-primary-shadow, rgba(44, 96, 109, 0.3));
}

/* Horizontal radio group variant */
.radio-group.horizontal {
    flex-direction: row;
    flex-wrap: wrap;
}

.radio-group.horizontal .radio-option {
    flex: 1;
    min-width: 120px;
    justify-content: center;
    text-align: center;
}

/* Compact radio group variant */
.radio-group.compact .radio-option {
    padding: 4px 8px;
    font-size: 12px;
}

/* Theme Item Container */
.theme-item {
    /* Uniformize frame style with .capacites-display-settings and .pouvoirs-section */
    background: var(--theme-background-alt);
    border: 1px solid var(--theme-primary-color);
    border-radius: 8px;
    padding: 15px;
    box-shadow: 0 4px 8px var(--theme-shadow-color, rgba(0, 0, 0, 0.1));
    transition: all 0.3s ease;
}

.theme-item:hover {
    box-shadow: 0 6px 12px var(--theme-primary-shadow, rgba(44, 96, 109, 0.2));
    border-color: var(--theme-primary-dark, #1a4a54);
}

.theme-item label {
    /* Uniformize legend style with .capacites-display-settings legend and .pouvoirs-section h3 */
    font-family: var(--theme-font-header);
    font-size: 16px;
    font-weight: bold;
    color: var(--theme-primary-color);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 15px;
    text-align: center;
    padding-bottom: 10px;
    border-bottom: 1px solid var(--theme-primary-light, rgba(44, 96, 109, 0.2));
}

/* Radio Group - Two Column Layout */
.theme-item .radio-group {
    gap: 8px; /* Reduced gap */
}

.theme-item .radio-option {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 15px;
    /* Condense spacing and appearance */
    padding: 8px 10px; /* Reduced padding */
    gap: 8px; /* Reduced gap */
    border-radius: 6px; /* Slightly smaller radius */
    transition: all 0.3s ease;
    cursor: pointer;
    position: relative;
    overflow: hidden;
}

.theme-item .radio-option::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(45deg, transparent 30%, var(--theme-primary-light));
}


/* Responsive design */
@media (max-width: 768px) {
    .avantage-inline-container {
        gap: 8px;
        padding: 8px 12px;
        justify-content: flex-start;
    }
    
    .avantage-checkbox-item {
        padding: 4px 8px;
        gap: 4px;
    }
    
    .avantage-checkbox-item input[type="checkbox"] {
        width: 14px;
        height: 14px;
    }
    
    .avantage-checkbox-item label {
        font-size: 12px;
    }
    
    .avantage-none-message {
        font-size: 12px;
    }
}

@media (max-width: 480px) {
    .avantage-inline-container {
        flex-direction: column;
        align-items: stretch;
        gap: 6px;
    }
    
    .avantage-checkbox-item {
        justify-content: center;
    }
    
    .avantage-none-message {
        text-align: center;
    }
}

/* Ensure proper spacing between advantage sections */
.avantage-inline-container + .avantage-inline-container {
    margin-top: 15px;
}

/* --- New Styles for Description Tab (Based on Caracteristiques) --- */

/* Main container for the description content */
.description-container {
    /* Similar to .caracteristiques-container, but might not need flex-direction: column if only one main block */
    display: flex;
    flex-direction: column; /* Stack top layout and biography vertically */
    gap: 0px; /* Space between top section and biography */
}

/* Layout for the top part (left/middle/right columns) */
.description-top-layout {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr; /* Three equal columns */
    gap: 5px; /* Gap between columns */
    align-items: start; /* Align items to the top */
    width: 100%;
    height: auto;
}

/* Styles for the columns */
.description-left-column,
.description-middle-column,
.description-right-column {
    display: flex;
    flex-direction: column; /* Stack content blocks vertically */
    gap: 10px; /* Space between description-group-blocks within a column */
    width: 100%;
    height: auto;
}

/* Specific gap for the middle column to reduce space between portrait and karma */
.description-middle-column {
    gap: 5px; /* Reduced from the general 15px for columns */
}

/* Style for each group block (Physical, Family, Karma, Contributions, etc.) */
.description-group-block {
    /* Similar to .caracteristique-block */
    display: flex;
    flex-direction: column; /* Stack title and fields list vertically */
    gap: 10px; /* Space between title and fields list */
    padding: 5px; /* Further reduced padding for a tighter layout */
    border: 1px solid var(--theme-border-color, #ccc);
    border-radius: 6px;
    background-color: var(--theme-background-light, #f9f9f9); /* Optional background */
}

/* Style for the title of each group block */
.description-group-title {
    /* Similar to .avantage-item h4 */
    margin: 0; /* Remove default margin */
    font-family: var(--theme-font-header, "Arial Black", Gadget, sans-serif);
    font-size: var(--theme-font-size-large, 16px); /* Slightly smaller than main characteristic titles */
    font-weight: bold;
    color: var(--theme-primary-color);
    letter-spacing: 1px;
    text-transform: uppercase;
    border-bottom: 1px solid var(--theme-primary-light);
    padding-bottom: 5px;
    text-align: center; /* Center the title */
}

/* Container for the list of fields within a group block */
.description-fields-list {
    display: flex;
    flex-direction: column; /* Stack individual field lines vertically */
    gap: 8px; /* Space between individual field lines */
}

.description-fields-list .form-group.description-field-line {
    margin-bottom: 0; /* Remove default form-group margin */
    display: flex; /* Arrange label and input horizontally */
    flex-direction: row; /* Explicitly set direction to row */
    align-items: center; /* Vertically align label and input */
    gap: 8px; /* Space between label and input */
    /* No background/border on the individual field line itself unless desired */
}

/* Style for the label within a description field line */
.description-fields-list .form-group.description-field-line label {
    /* Similar to .characteristic-value-line label */
    margin-bottom: 0;
    white-space: nowrap;
    flex-shrink: 0;
    flex-basis: 110px; /* Ensures labels have a consistent starting width */
    font-weight: bold; /* Ensure label is bold */
    color: var(--theme-primary-color); /* Ensure label color */
    font-size: 14px; /* Ensure label font size */
}

/* Style for inputs within a description field line */
.description-fields-list .form-group.description-field-line input[type="text"],
.description-fields-list .form-group.description-field-line select {
    min-width: fit-content;
    flex-grow: 1; /* Allow input/select to take remaining space */
    /* Inherits general input/select styles, adjust if needed */
}

/* Specific adjustments for contribution inputs if needed */
.description-fields-list .form-group.description-field-line input.contribution-input[type="number"] {
    flex-grow: 1; /* Prevent the number input from growing */
    flex-shrink: 0;
    max-width: 70px;
    align-items: right;
    align-self: center; /* Prevent the number input from shrinking */
    /* width is set by inline style in HBS (e.g., style="width: 80px;") */
}

/* Karma Display Specific Styles - Overlay Layout */
.karma-image-display-container {
    position: relative; /* Establishes a positioning context for the overlay input */
    width: 100%; /* Takes the full width of its parent (description-middle-column) */
    display: flex; /* To help center the input if the image itself doesn't fill the container perfectly */
    justify-content: center;
    align-items: center;
    border: none; /* Remove any border that might be applied */
    transform: translateY(-60px); /* Move the container up */
}

.karma-background-image {
    width: 100%; /* Image takes the full width of the container */
    height: auto; /* Maintain aspect ratio */
    display: block; /* Removes any extra space below the image */
    border: none; /* Remove any border that might be applied */
}

.karma-overlay-input.karma-input-circle { /* Targeting the input specifically for overlay */
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%); /* Centers the input on the image */
    z-index: 1; /* Ensures the input is above the image */
    /* The .karma-input-circle class from actorDescription.css handles its appearance (size, border, etc.) */
}
/* Karma Input Positional Offsets */
.karma-overlay-input.karma-input-circle.karma-offset-left {
    /* Base centering is translate(-50%, -50%). We add -100px to the X-axis. */
    transform: translate(calc(-50% - 112px), -50%) !important;
}

.karma-overlay-input.karma-input-circle.karma-offset-right {
    /* Base centering is translate(-50%, -50%). We add +100px to the X-axis. */
    transform: translate(calc(-50% + 112px), -50%) !important;
}

.clickable-link {
    cursor: pointer;
    text-decoration: underline; /* Optional: common link styling */
    color: var(--theme-primary-color, #2C606D); /* Optional: use a link color */
}

.clickable-link:hover {
    text-decoration: none; /* Optional: remove underline on hover */
    color: var(--theme-primary-dark, #1a4a54); /* Optional: darker color on hover */
}

/* Clickable Label Styles */
.clickable-label {
    cursor: pointer;
    position: relative;
    transition: all 0.3s ease;
    user-select: none;
    display: inline-flex;
    align-items: center;
    gap: 5px;
}

.clickable-label:hover {
    color: var(--theme-primary-color);
    text-shadow: 0 0 3px var(--theme-primary-shadow);
}

.clickable-label::after {
    content: '?';
    display: inline-block;
    width: 16px;
    height: 16px;
    background: var(--theme-primary-color);
    color: white;
    border-radius: 50%;
    font-size: 11px;
    font-weight: bold;
    text-align: center;
    line-height: 16px;
    margin-left: 5px;
    transition: all 0.3s ease;
}

.clickable-label:hover::after {
    background: var(--theme-primary-dark);
    transform: scale(1.1);
}

.clickable-label.active::after {
    content: '×';
    background: var(--theme-accent-color);
    transform: rotate(90deg);
}

/* Description Note Styles */
.description-note {
    margin-top: 8px;
    margin-bottom: 10px;
    padding: 12px 15px;
    background: var(--theme-background-alt);
    border: 1px solid var(--theme-primary-light);
    border-left: 4px solid var(--theme-primary-color);
    border-radius: 4px;
    box-shadow: 0 2px 4px var(--theme-shadow-color);
    animation: slideDown 0.3s ease;
    position: relative;
}

.description-note small {
    font-size: 12px;
    line-height: 1.4;
    color: var(--theme-text-secondary);
    font-style: italic;
    display: block;
}

.description-note::before {
    content: '';
    position: absolute;
    top: -6px;
    left: 20px;
    width: 0;
    height: 0;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    border-bottom: 6px solid var(--theme-primary-light);
}

/* Animation for description note */
@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-10px);
        max-height: 0;
    }
    to {
        opacity: 1;
        transform: translateY(0);
        max-height: 100px;
    }
}

@keyframes slideUp {
    from {
        opacity: 1;
        transform: translateY(0);
        max-height: 100px;
    }
    to {
        opacity: 0;
        transform: translateY(-10px);
        max-height: 0;
    }
}

.description-note.hiding {
    animation: slideUp 0.3s ease;
}

/* Responsive design */
@media (max-width: 768px) {
    .description-note {
        padding: 10px 12px;
        margin-top: 6px;
    }
    
    .description-note small {
        font-size: 11px;
    }
    
    .clickable-label::after {
        width: 14px;
        height: 14px;
        font-size: 10px;
        line-height: 14px;
    }
}

/* Caracteristique Groups */
.caracteristique-group {
    background: var(--theme-background-light);
    border: 1px solid var(--theme-border-color);
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 15px;
}

.caracteristique-header {
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 1px solid var(--theme-primary-light);
}

.caracteristique-header h4 {
    margin: 0;
    font-family: var(--theme-font-header);
    font-size: 16px;
    font-weight: bold;
    color: var(--theme-primary-color);
    display: flex;
    align-items: center;
    gap: 10px;
}

.caracteristique-value {
    background: var(--theme-primary-color);
    color: white;
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: bold;
}


.col-caracteristique {
    padding: 5px !important;
}

.caracteristique-select {
    width: 100%;
    padding: 6px;
    border: 1px solid var(--theme-border-color);
    border-radius: 4px;
    background: var(--theme-background-light);
    font-size: 12px;
    color: var(--theme-text-color);
}

.caracteristique-select:focus {
    border-color: var(--theme-primary-color);
    outline: none;
    box-shadow: 0 0 3px var(--theme-primary-shadow);
}

.caracteristique-value {
    background: var(--theme-primary-color);
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: bold;
    min-width: 30px;
    text-align: center;
}

.col-input {
    padding: 5px !important;
}



.col-specialite {
    padding: 5px !important;
}

.specialite-select {
    width: 100%;
    padding: 6px;
    border: 1px solid var(--theme-border-color);
    border-radius: 4px;
    background: var(--theme-background-light);
    font-size: 12px;
    color: var(--theme-text-color);
}

.specialite-select:focus {
    border-color: var(--theme-primary-color);
    outline: none;
    box-shadow: 0 0 3px var(--theme-primary-shadow);
}

/* Description Notes */
.description-note {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    z-index: 10;
    margin-top: 5px;
    padding: 8px 12px;
    background: var(--theme-background-alt);
    border: 1px solid var(--theme-primary-light);
    border-left: 4px solid var(--theme-primary-color);
    border-radius: 4px;
    box-shadow: 0 2px 8px var(--theme-shadow-color);
    animation: slideDown 0.3s ease;
}


/* Animation for value updates */
@keyframes valueUpdate {
    0% {
        background: var(--theme-primary-light);
        transform: scale(1);
    }
    50% {
        background: var(--theme-primary-color);
        transform: scale(1.05);
    }
    100% {
        background: var(--theme-accent-color);
        transform: scale(1);
    }
}

/* Common Stats Grid Layout */
.common-stats-grid {
  display: grid;
  grid-template-columns: max-content 1fr; /* Label takes its content's width, input takes remaining space */
  gap: 8px 15px; /* Row gap and Column gap */
  align-items: center; /* Vertically align items in each row */
}

.common-stats-grid .commonStats-name h3 {
  margin: 0; /* Remove default h3 margin */
  font-size: 14px; /* Or your desired font size */
  font-weight: bold;
  color: var(--theme-primary-color); /* Using theme variable for consistency */
}

.common-stats-grid .commonStats-value input {
  width: 100%; /* Make input take full width of its grid cell */
  padding: 6px 8px;
  border: 1px solid var(--theme-border-color, #ccc);
  border-radius: 4px;
  background: var(--theme-background-alt, rgba(255, 255, 255, 0.8));
  box-sizing: border-box; /* Include padding and border in the element's total width and height */
  color: var(--theme-text-color);
}

.common-stats-grid .commonStats-value input:focus {
  border-color: var(--theme-primary-color);
  outline: none;
  box-shadow: 0 0 5px var(--theme-primary-shadow, rgba(44, 96, 109, 0.3));
}

/* Characteristic Label and Input on the same line */
.characteristic-value-line {
  display: flex; /* Changed from grid to flex for better multi-item horizontal alignment */
  gap: 8px; /* Space between label and input */
  align-items: center; /* Vertically align label and input */
  width: 100%;
  margin-bottom: 5px; /* Add some space below each line */
}

.characteristic-value-line label {
  margin-bottom: 0; /* Remove any bottom margin if inherited */
  white-space: nowrap; /* Prevent label text from wrapping */
  flex-shrink: 0; /* Prevent label from shrinking */
  flex-basis: 110px; /* Ensures all labels take up the same initial width, aligning subsequent inputs. Adjust value as needed. */
}

.characteristic-value-line input[type="number"]:not(.temp-bonus-input) {
  flex-shrink: 0;
}

.characteristic-value-line .temp-bonus-input {
  /* The inline style="width: 80px !important;" from HBS will take precedence for width. */
  padding: 2px 4px !important; /* Copied from previous suggestion */
  font-size: 0.9em !important; /* Copied from previous suggestion */
  text-align: center; /* Copied from previous suggestion */
  border: 1px solid #ccc; /* Copied from previous suggestion */
  border-radius: 3px; /* Copied from previous suggestion */
  flex-shrink: 0; /* Prevent it from shrinking */
}

.theme-settings-group {
    padding: 5px; /* Reduce padding */
    margin-bottom: 10px; /* Reduce bottom margin */
}

.theme-settings-group .theme-item {
    margin-bottom: 5px; /* Reduce spacing between theme items */
}

.theme-settings-group .radio-group {
    gap: 5px; /* Reduce space between radio options */
    flex-wrap: wrap; /* Allow wrapping if options are too many */
}

.theme-settings-group .radio-option {
    margin-bottom: 2px; /* Reduce margin below each option */
}

.theme-settings-group label {
    font-size: 0.9em; /* Slightly smaller font for labels */
    margin-right: 5px; /* Adjust label margin */
}

.theme-settings-group input[type="radio"] {
    margin-right: 2px; /* Adjust space after radio button */
}

.stat-line {
  display: flex; /* Aligne les enfants (label et input) sur une ligne */
  align-items: flex-start; /* Aligne les enfants en haut de la ligne */
  margin-bottom: 5px; /* Ajoute un petit espace en dessous de chaque ligne de stat */
}

.stat-line label {
  margin-right: 10px; /* Espace entre le libellé et le champ de saisie */
  white-space: nowrap; /* Empêche le texte du libellé de passer à la ligne */
}

.sub-characteristic-total-display {
  font-size: 1.05em !important; /* Slightly adjusted for better fit in circle */
  font-weight: bold !important;
  background-color: var(--theme-background-alt) !important; 
  color: var(--theme-primary-color) !important;
  text-align: center !important;
  width: 38px !important; /* Increased size from 30px */
  margin-left: 5px !important; /* Space from temp bonus */
  cursor: not-allowed !important;
  box-sizing: border-box !important;
  flex-shrink: 0; /* Prevent shrinking */

  /* --- New Styles for Round Shape, Shadow, and Relief --- */
  height: 38px !important; /* Match new width for a circle */
  padding: 0 !important; /* Remove padding to help with circular shape and text centering */
  border-radius: 50%; /* Makes it round */
  border: 2px solid var(--theme-primary-dark, #1a4a54); /* Border remains 2px, good for this size */
  
  /* Shadow for depth and a slight "pop" */
  box-shadow:
    /* Slightly more pronounced outer shadow for better lift */
    2px 2px 4px rgba(0, 0, 0, 0.22), /* Adjusted shadow for new size */
    /* Brighter inner highlight for the "top-left" light source */
    inset 2px 2px 2px var(--theme-primary-light, rgba(255,255,255,0.3)), /* Adjusted inner highlight */
    /* Deeper inner shadow for the "bottom-right" shaded part */
    inset -2px -2px 2px var(--theme-primary-shadow, rgba(0,0,0,0.12)); /* Adjusted inner contour */

  /* Text centering */
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 1; /* Reset line-height as flex handles centering */

  transition: all 0.2s ease-in-out;
}

.calculated-field.major-stat-value {
  /* Override or ensure specific dimensions for a larger circle */
  width: 30px !important; /* Reduced size */
  height: 50px !important; /* Match new width for a circle */
  padding: 0 !important; /* Remove padding for flex centering */
  border-radius: 50%; /* Makes it round */
  
  /* Adjust font size for the larger circle */
  font-size: 1.3em !important; /* Adjusted font size for 80px circle */
  font-weight: bold !important; /* Already in .calculated-field */
  
  border: 2px solid var(--theme-primary-dark, #1a4a54); /* Adjusted border for smaller circle */
  
  /* Enhanced shadow for a larger element */
  box-shadow:
    2px 2px 5px rgba(0, 0, 0, 0.25), /* Adjusted outer shadow */
    inset 2px 2px 3px var(--theme-primary-light, rgba(255,255,255,0.35)), /* Adjusted inner highlight */
    inset -2px -2px 3px var(--theme-primary-shadow, rgba(0,0,0,0.15)); /* Adjusted inner contour */

  /* Text centering */
  display: flex !important; /* Ensure flex display */
  align-items: center !important;
  justify-content: center !important;
  line-height: 1 !important; /* Reset line-height */

  transition: all 0.2s ease-in-out; /* Inherited or can be re-declared */
}

.stat-line input[type="number"].ptscreation-component {
  flex-grow: 1; /* Permet au champ de saisie de prendre l'espace restant */
}

.major-stat-line {
    text-align: center;
    margin-bottom: 2px;
    line-height: 0;
    display: flex;
    margin-left: 15px;
}

.major-stat-line .calculated-field.major-stat-value,
.major-stat-line .temp-bonus-input.major-stat-temp-bonus {
  display: inline-block; /* Allow them to sit side-by-side */
  vertical-align: middle; /* Align their vertical centers initially */
}

/* Main stat circle is 80x80px via .calculated-field.major-stat-value */

.major-stat-line .temp-bonus-input.major-stat-temp-bonus {
  width: 36px !important; /* Making it smaller than the HBS inline 40px */
  height: 36px !important;/* Make it circular */
  border-radius: 50%;
  font-size: 0.8em; /* Smaller font for the smaller circle */
  margin-left: 8px;  /* Space to the right of the main circle */
  position: relative; /* To allow the 'top' nudge */
  top: 12px;          /* Nudge it down by 12px from its middle alignment */
}
/* Styles for clickable tab titles and toggleable content */
.clickable-tab-title {
    text-align: center;
    cursor: pointer;
    padding: 10px 15px;
    background-color: var(--theme-primary-light, #e6f3f7); /* Fallback color */
    border-bottom: 1px solid var(--theme-primary-color, #2C606D);
    margin: 0; /* Remove default h4 margin, ensure it's flush */
    font-family: var(--theme-font-header, "Arial Black", Gadget, sans-serif); /* Standardized */
    font-size: var(--theme-font-size-xlarge, 20px); /* Standardized */
    color: var(--theme-primary-color, #2C606D);
    text-transform: uppercase;
    letter-spacing: 1.5px; /* Standardized */
}

.section-header-with-controls {
    display: flex;
    justify-content: center; /* Center the main title text */
    align-items: center;
    position: relative; /* For positioning the button */
}

.section-header-with-controls span {
    flex-grow: 1; /* Allows the title span to take up space and center correctly */
    text-align: center; /* Ensure the span's text is centered if it doesn't fill */
}

.section-header-with-controls .icon-button {
    position: absolute; /* Position button relative to the h3/h4 */
    right: 15px; /* Adjust as needed for padding */
    font-size: 0.8em; /* Make icon slightly smaller than header text */
    padding: 4px 6px;
    line-height: 1; /* Ensure icon is vertically centered in button */
}

.clickable-tab-title:hover {
    background-color: var(--theme-primary-medium, #d0e0e8); /* Slightly darker on hover */
}

.toggleable-tab-content {
    width: 100%; /* Ensure it takes full width of the tab */
}

/* --- Condensation Styles for Settings Tab --- */

/* Condense .pouvoirs-section within .opt-group (for accespouvoirs.hbs & theme.hbs general theme) */
.opt-group .pouvoirs-section {
    padding: 10px;
    margin-bottom: 10px;
}

.opt-group .pouvoirs-section h3 {
    font-size: var(--theme-font-size-large, 16px); /* Adjusted for context, but standardized */
    margin-bottom: 8px;
    padding-bottom: 6px;
}

.opt-group .pouvoirs-container {
    gap: 6px; /* Reduced gap between options */
}

.opt-group .pouvoir-row {
    padding: 6px 8px;
    gap: 6px; /* Reduced gap between input and label */
    min-height: 32px;
    border-radius: 6px;
}

.opt-group .pouvoir-row input[type="checkbox"],
.opt-group .pouvoir-row input[type="radio"] {
    width: 14px;
    height: 14px;
}

/* Adjust checkmark size for condensed checkbox */
.opt-group .pouvoir-row input[type="checkbox"]:checked::after {
    font-size: 10px; /* Smaller checkmark */
}

/* Adjust dot size for condensed radio button */
.opt-group .pouvoir-row input[type="radio"]:checked::after {
    width: 6px; /* Smaller dot */
    height: 6px; /* Smaller dot */
}

.opt-group .pouvoir-row label {
    font-size: 12px;
}

/* Condense .theme-item within .atout-style-settings-group (for theme.hbs Atout Style) */
.atout-style-settings-group .theme-item {
    padding: 10px;
    margin-bottom: 10px; /* Add some margin if it's the last item */
}

/* The direct label child of .theme-item is its header */
.atout-style-settings-group .theme-item > label {
    font-size: var(--theme-font-size-large, 16px); /* Adjusted for context, but standardized */
    margin-bottom: 8px;
    padding-bottom: 6px;
    /* Inherits font-family, color, text-transform, letter-spacing from .theme-item > label (which should be updated) */
}

.atout-style-settings-group .theme-item .select-group select {
    font-size: 12px;
    padding: 4px 6px;
    /* You might need to adjust height or other properties if it looks off */
}

/* Ensure the select itself is also condensed if general input styles are too large */
.atout-style-settings-group .theme-item select {
    font-size: 12px;
    padding: 4px 6px;
}

/* Status Image and Overlay Styles */
.actorDesc-statusImageContainer {
    position: relative; /* Anchor for absolute positioning of overlay */
    width: 100%; /* Takes full width of its parent (.middle-column) */
    margin-top: 15px; /* Space from the actor image container above */
    border-radius: 8px; /* Optional: if you want rounded corners for the container/image */
    overflow: hidden; /* Optional: if you want to clip anything overflowing from rounded corners */
}

.actorDesc-statusFieldsOverlay {
    width: 100%;
    height: auto; /* Maintain aspect ratio of the image */
    display: block; /* Remove extra space below image if it's an inline element */
    object-fit: cover; /* Or 'contain', depending on how you want the image to fit */
    flex-direction: column; /* Stack HP and Energy lines vertically */
    justify-content: center; /* Center them vertically within the overlay */
    align-items: center; /* Center them horizontally */
    padding: 5%; /* Padding relative to container size, adjust as needed */
    box-sizing: border-box;
    pointer-events: none; /* Allows clicks to pass through to elements behind if necessary */
}

.status-line {
    display: flex;
    align-items: baseline; /* Aligns text like "100 / 50 HP" nicely */
    justify-content: center;
    width: 100%;
    color: white; /* Default text color, ensure it's visible against your image */
    font-family: 'Arial', sans-serif; /* Choose a clear, readable font */
    text-shadow: 1px 1px 3px rgba(0,0,0,0.8); /* Shadow for better readability */
}

.status-line.health-status {
    margin-bottom: 5%; /* Space between HP and Energy lines, relative to container height */
}

.status-value {
    font-size: clamp(14px, 3.5vw, 30px); /* Responsive font size: min, preferred (viewport width), max */
    font-weight: bold;
    padding: 0 1px; /* Minimal horizontal padding */
    background: none !important; /* Explicitly no background */
    border: none !important; /* Explicitly no border */
    line-height: 1.1;
}

.status-separator {
    font-size: clamp(12px, 2.5vw, 25px);
    margin: 0 1px; /* Minimal space around separator */
}

.status-label {
    font-size: clamp(10px, 2vw, 20px);
    margin-left: clamp(3px, 1vw, 8px); /* Space before the label (HP/EN) */
    font-variant: small-caps; /* Optional: for a stylized look */
    font-weight: normal;
}
/* Status Image and Overlay Styles */
.status-image-container {
    position: relative; /* Anchor for absolute positioning of overlay */
    width: 100%; /* Takes full width of its parent (.middle-column) */
    margin-top: 15px; /* Space from the actor image container above */
    border-radius: 8px; /* Optional: if you want rounded corners for the container/image */
    overflow: hidden; /* Optional: if you want to clip anything overflowing from rounded corners */
}

.status-background-image {
    width: 100%;
    height: auto; /* Maintain aspect ratio of the image */
    display: block; /* Remove extra space below image if it's an inline element */
    object-fit: cover; /* Or 'contain', depending on how you want the image to fit */
}

.status-fields-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex; /* Use flex to stack the status groups (HP/Reserve, Energy/Reserve) */
    flex-direction: column;
    justify-content: center; /* Center groups vertically within the overlay */
    align-items: center; /* Center groups horizontally */
    padding: 5%; /* Padding relative to container size, adjust as needed */
    box-sizing: border-box;
    pointer-events: none; /* Allows clicks to pass through to elements behind if necessary */

    /* Add border around the entire overlay */
    border: 2px solid var(--theme-primary-color); /* Use theme color for border */
    border-radius: 8px; /* Match container border-radius */
}

.actorDesc-statusGroup {
    display: grid; /* Use grid to align items within each group (max, /, actual, label) */
    grid-template-columns: max-content max-content max-content max-content; /* Align columns based on content width */
    gap: 5px 5px; /* Row gap, Column gap - adjust as needed */
    align-items: baseline; /* Aligns text like "100 / 50 HP" nicely */
    justify-content: center; /* Center the grid tracks (the entire line) horizontally */
    justify-items: center; /* Horizontally center items in each grid cell */
    width: 100%; /* Take full width of the flex container */
}

.actorDesc-statusGroup.health-group {
    margin-bottom: 5%; /* Space between HP and Energy lines, relative to container height */
}

span.actorDesc-statusValue {
    color: white; 
    font-family: var(--theme-font-body, 'Arial', sans-serif); 
    text-shadow: 1px 1px 3px rgba(0,0,0,0.8); 
    font-size: clamp(14px, 3.5vw, 30px); /* Original font size */
    font-weight: bold;
    padding: 0 1px; 
    background: none !important; 
    border: none !important; 
    line-height: 1.1;
    /* Add any other specific styles for the max value text if needed */
}

/* For the INPUT elements (current, updatable values) - make them round */
input.actorDesc-statusValue {
    color: white;
    font-family: var(--theme-font-body, 'Arial', sans-serif);
    text-shadow: 1px 1px 3px rgba(0,0,0,0.8); /* Keep for readability */
    font-size: clamp(14px, 2.2vw, 22px); /* Adjusted font size for circle */
    font-weight: bold;
    line-height: 1; /* Adjust for vertical centering in circle */

    width: clamp(45px, 6vw, 55px); /* Responsive width for the circle */
    height: clamp(45px, 6vw, 55px); /* Responsive height, same as width */
    padding: 0;
    box-sizing: border-box;
    border-radius: 50%; /* Makes it round */
    border: 2px solid var(--theme-primary-color); /* Themed border */
    background-color: rgba(0, 0, 0, 0.4); /* Semi-transparent background for input */
    text-align: center;
    appearance: textfield; /* For number inputs, to hide spinners in some browsers */
    -moz-appearance: textfield; /* Firefox */
}

.actorDesc-statusSeparator {
    color: white; 
    font-family: var(--theme-font-body, 'Arial', sans-serif); 
    text-shadow: 1px 1px 3px rgba(0,0,0,0.8); 
    font-size: clamp(12px, 2.5vw, 25px);
    margin: 0 1px; 
}

.actorDesc-statusLabel {
    color: white; 
    font-family: var(--theme-font-body, 'Arial', sans-serif); 
    text-shadow: 1px 1px 3px rgba(0,0,0,0.8); 
    font-size: clamp(10px, 2vw, 20px);
    margin-left: clamp(3px, 1vw, 8px); 
    font-variant: small-caps; 
    font-weight: normal;
}

/* Align labels to the start within their grid cell */
.actorDesc-statusGroup .actorDesc-statusLabel {
    justify-self: start;
}

/* Hide spinners for number input with actorDesc-statusValue class */
input.actorDesc-statusValue::-webkit-outer-spin-button,
input.actorDesc-statusValue::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

/* Shared styles for pouvoir inputs */
.pouvoir-input-main,
.vs-input-main {
    width: 100px; /* Maintained width */
    height: 30px; /* Explicit height for a more controlled shape */
    padding: 5px 10px; /* Vertical padding 5px, horizontal 10px for centered text */
    border-radius: 15px; /* Half of height to create a pill shape */
    border: 2px solid var(--theme-primary-color);
    background-color: var(--theme-background-alt); /* Use theme background */
    color: var(--theme-primary-color); /* Use theme text color */
    text-align: center;
    font-weight: bold;
    box-shadow: 0 2px 5px var(--theme-shadow-color, rgba(0,0,0,0.2)); /* Add a shadow */
    transition: all 0.2s ease-in-out; /* For smooth focus transition */
    box-sizing: border-box; /* Ensures padding and border don't add to width/height */
    appearance: textfield; /* Attempt to remove number input spinners */
    -moz-appearance: textfield; /* Firefox specific */
}

.pouvoir-input-main:focus,
.vs-input-main:focus {
    outline: none; /* Remove default browser outline */
    border-color: var(--theme-primary-dark); /* Darker border on focus */
    box-shadow: 0 0 8px var(--theme-primary-color); /* Glow effect on focus */
}

/* Hide number input spinners for Webkit browsers */
.pouvoir-input-main::-webkit-outer-spin-button,
.pouvoir-input-main::-webkit-inner-spin-button,
.vs-input-main::-webkit-outer-spin-button,
.vs-input-main::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

/* Shared styles for pouvoir buttons */
.pouvoir-capacites-btn-main,
.vs-capacites-btn-main {
    background: var(--theme-primary-color); /* As per pouvoir-capacites-btn-main original style */
    color: white;
    width: 200px; /* As per pouvoir-capacites-btn-main original style */
    padding: 8px 16px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    /* vs-capacites-btn-main previously had min-width and a different background */
}

/* Styles for the new "line" layout (from previous request) - adjust if needed or remove if superseded */
.sheet-content .form-group.calculated-stat { /* This rule might now be unused or need re-evaluation */
    margin-bottom: 15px; /* Was 25px, adjust as needed */
    /* padding: 15px; */ /* Padding will be handled by new containers */
    /* border: 1px solid #ccc; */
    /* border-radius: 5px; */
}

/* New Layout Styles for Caracteristiques Tab */
.caracteristiques-container {
    display: flex;
    flex-direction: column;
    gap: 20px; /* Space between characteristics section and avantages section */
}

.caracteristiques-details-layout {
    display: flex;
    flex-direction: column;
    gap: 8px; /* Reduced space between each .caracteristique-block */
}

.caracteristique-block {
    display: flex;
    flex-direction: row; /* Main stat info and sub-stats list side-by-side */
    align-items: center; /* Vertically align main-stat-info and the row of sub-stats */
    gap: 10px; /* Reduced space between main-stat-info and sub-stats-list */
    padding: 10px; /* Reduced padding */
    border: 1px solid var(--theme-border-color, #ccc);
    border-radius: 6px;
    background-color: var(--theme-background-light, #f9f9f9); /* Optional background */
}
.main-stat-info {
    display: flex;
    flex-direction: column;
    align-items: center; /* Center "PHYSIQUE" label and its value */
    gap: 4px; /* Reduced gap */
    width: max-content; /* Ensure it fits its content */
}


/* Ensure the main characteristic label (PHYSIQUE, etc.) is styled appropriately */
.main-stat-info > label {
    font-family: var(--theme-font-header, "Arial Black", Gadget, sans-serif);
    font-size: var(--theme-font-size-xlarge, 20px);
    font-weight: bold;
    color: var(--theme-primary-color);
    text-transform: uppercase;
    letter-spacing: 1.5px;
    text-align: center;
    margin-bottom: 5px; /* Space below label */
}
.main-stat-info .major-stat-line {
    /* Styles for major-stat-line are likely fine, ensure it centers its content if not already */
    justify-content: center;
}

.sub-stats-list {
    flex-grow: 1; /* Takes remaining space in the row */
    display: grid; /* Changed to grid */
    grid-template-columns: repeat(3, 1fr); /* Create 3 equal-width columns for sub-stats */
    gap: 8px;            /* Reduced gap between sub-stat columns */
    align-items: start;  /* Align sub-stat blocks to the top of their grid cell */
    width: 100%; /* Ensure the grid container itself tries to use available space */
    /* No background or border directly on sub-stats-list itself now */
}

.sub-stats-list .form-group {
    margin-bottom: 0; /* Remove default form-group margin if .sub-stats-list provides gap */
    /* Styling moved here from .sub-stats-list for individual sub-stat blocks */
    padding: 8px; /* Reduced padding */
    background: var(--theme-background-alt); 
    border-radius: 4px;                    
    border-left: 3px solid var(--theme-primary-color); 
    display: flex; /* Helps the form-group shrink to its .characteristic-value-line content */
}
/* .characteristic-value-line itself is already display: flex and should size to its content */

/* Avantages Section */
.avantages-all-section {
    margin-top: 20px;
    padding-top: 20px;
    border-top: 2px solid var(--theme-primary-color);
}

.avantages-all-section {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); /* Responsive grid */
    gap: 15px;
}

.avantage-item {
    background: var(--theme-background-alt, #f0f0f0);
    border: 1px solid var(--theme-border-light, #ddd);
    border-left: 3px solid var(--theme-primary-color);
    padding: 15px;
    border-radius: 4px;
    display: flex;
    flex-direction: column;
    gap: 5px;
}

.avantage-item h4 {
    margin-top: 0;
    margin-bottom: 5px;
    font-family: var(--theme-font-header, "Arial Black", Gadget, sans-serif); /* Standardized */
    font-size: var(--theme-font-size-large, 16px); /* Standardized, adjust if needed for this context */
    font-weight: bold; /* Matches actorDesc-statusLabel */
    color: var(--theme-text-color); /* Matches actorDesc-statusLabel */
    /* Removed letter-spacing and text-transform to align with actorDesc-statusLabel */
    border-bottom: 1px solid var(--theme-primary-light); /* Keep border */
    padding-bottom: 5px;
}

/* Ensure clickable labels in avantages section are block for better layout */
.avantage-item .clickable-label {
    display: block; /* Make it take full width for text-align */
    text-align: left; /* Align text to the left */
    margin-bottom: 5px;
}

.avantage-item .description-note {
    position: relative; 
    top: auto; left: auto; right: auto; /* Reset absolute positioning if inherited */
}

/* In ambre.css */

/* New styles for avantage dots line and dots container */
.avantage-control-line {
    display: flex;
    align-items: center; /* Vertically align label and dots */
    gap: 15px; /* Space between label and dots container */
    margin-bottom: 8px; /* Space before description note if it appears below */
    flex-direction: row;
}

.avantage-dots-container {
    display: flex;
    align-items: center;
    gap: 6px; /* Space between dots */
    flex-wrap: wrap; /* Allow dots to wrap if many */
    min-height: 20px; /* Ensure it has some height even if empty for alignment */
}

.avantage-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    border: 1px solid var(--theme-border-color, #999); /* Slightly darker border for unfilled */
    background-color: var(--theme-background-light, #fff); /* Unfilled state */
    cursor: pointer;
    transition: background-color 0.2s ease, border-color 0.2s ease, transform 0.1s ease;
    box-shadow: inset 1px 1px 2px rgba(0,0,0,0.1); /* Subtle inner shadow for depth */
}

.avantage-dot:hover {
    border-color: var(--theme-primary-color);
    transform: scale(1.1);
}

.avantage-dot.filled {
    background-color: var(--theme-primary-color);
    border-color: var(--theme-primary-dark, var(--theme-primary-color));
    box-shadow: 0 0 3px var(--theme-primary-shadow); /* Glow for filled dots */
}

/* Ensure clickable-label in this context aligns well */
.avantage-control-line .clickable-label {
    margin-bottom: 0; /* Remove bottom margin as it's now in a flex row */
    flex-shrink: 0; /* Prevent label from shrinking too much */
}

/* The .description-note will appear below .avantage-control-line when toggled */
.avantage-item .description-note {
    /* position: relative; top: auto; left: auto; right: auto; is good */
    margin-top: 5px; /* Space above the description note when it appears */
}

label[align="left"] {
    text-align: left; 
}
.clickable-talent-circle {
    cursor: pointer; /* Changes cursor to a crosshair on hover */
}
.possessions-section-draggable {
    cursor: move; /* Indicate that this element can be moved */
    user-select: none; /* Prevent text selection during drag */
    transition: border-color 0.2s ease, opacity 0.2s ease;
}

.possessions-section-draggable.dragging {
    opacity: 0.5;
    border-color: var(--theme-primary-color);
}

.possessions-section-draggable.drag-over-before {
    border-top: 2px solid var(--theme-accent-color, blue);
}

.possessions-section-draggable.drag-over-after {
    border-bottom: 2px solid var(--theme-accent-color, blue);
}

/* General styling for drop targets */
.drop-target {
    border: 2px dashed var(--theme-border-color, #ccc);
    padding: 10px;
    margin-top: 5px; /* Add some space above the drop zone */
    background-color: var(--theme-background-light, #f9f9f9); /* Light background */
    min-height: 50px; /* Ensure it has some height even if empty */
    transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out;
}

/* Styling for when an item is dragged over a drop target */
.drop-target.drag-over {
    background-color: var(--theme-primary-light, #e0f7fa); /* Highlight color */
    border-color: var(--theme-primary-color, #007bff); /* Stronger border color */
}


.clickable-tab-title {
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: space-between; /* Pushes icon to the right */
    padding: 5px 10px;
    background-color: var(--color-ambre-dark);
    color: var(--color-ambre-light);
    border-bottom: 1px solid var(--color-ambre-border);
    margin-top: 10px;
    font-size: 1.2em;
}

.clickable-tab-title span {
    flex-grow: 1; /* Allows the text to take available space */
}

/* Icon styling */
.collapsible-icon {
    margin-left: 10px;
    transition: transform 0.2s ease-in-out; /* Smooth rotation */
}

.sheet-header-buttons button {
    background: rgba(255, 255, 255, 0.8);
    border: 1px solid #aaa;
    border-radius: 5px;
    padding: 5px;
    font-size: 1.6em;
    cursor: pointer;
}

.sheet-header-buttons {
    position: absolute;
    right: 10px;
    top: 10px;
    display: flex;
    gap: 30px; /* Increased gap by button size (20px) */
}

.sheet-header-buttons button,
.sheet-header-buttons a.header-button { /* Apply common styles to both button and anchor tags */
    width: 20px; /* Halved width */
    height: 20px; /* Halved height */
    padding: 0; /* Remove padding as width/height are fixed */
    display: flex; /* Use flexbox to center content */
    align-items: center; /* Center vertically */
    justify-content: center; /* Center horizontally */
    color: var(--theme-primary-color);
    background: rgba(255, 255, 255, 0.8);
    border: 1px solid var(--theme-border-color);
    border-radius: 5px;
    cursor: pointer;
}

.sheet-header-buttons button i,
.sheet-header-buttons a.header-button i {
    font-size: 0.9em; /* Halved icon size to fit 20x20px button */
}

.sheet-header-buttons button:hover,
.sheet-header-buttons a.header-button:hover {
    background: rgba(255, 255, 255, 1); /* Slightly more opaque on hover */
    border-color: var(--theme-primary-color); /* Use theme color for border on hover */
    color: var(--theme-primary-color); /* Use theme color for icon on hover */
}
/* Rotate icon when the header is "active" (meaning content is shown) */
.clickable-tab-title.active .collapsible-icon {
    transform: rotate(90deg); /* Rotates to point down when expanded */
}

/* Initial state for content */
.toggleable-tab-content {
    display: none; /* Hidden by default */
    overflow: hidden; /* Ensures smooth slide animation */
}

/* If a section should be expanded by default */
.toggleable-tab-content.expanded {
    display: block; /* Show if it has the 'expanded' class */
}

/* Rune/Catalyseur Sheet Styles */
.rune-details {
    padding: 10px;
    border-bottom: 1px solid var(--theme-border-color);
    margin-bottom: 10px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.drop-zone-line {
    display: flex;
    align-items: center;
    gap: 10px;
}

.sortilege-drop-target {
    flex-grow: 1;
    border: 2px dashed #aaa;
    border-radius: 5px;
    padding: 5px;
    min-height: 36px;
    text-align: center;
    color: #888;
    background-color: #f0f0f0;
    display: flex;
    align-items: center;
    justify-content: center;
}

.sortilege-drop-target .linked-item-display {
    display: flex;
    align-items: center;
    gap: 5px;
}

.dots-container {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    padding: 5px;
    border: 1px solid #ccc;
    border-radius: 4px;
    min-height: 24px;
}

.dot {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    border: 1px solid #999;
    background-color: #fff;
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: inset 1px 1px 2px rgba(0,0,0,0.1);
}

.dot.filled {
    background-color: var(--theme-primary-color);
    border-color: var(--theme-primary-dark, var(--theme-primary-color));
    box-shadow: 0 0 3px var(--theme-primary-shadow);
}

.sortilege-drop-target.drag-over {
    background-color: var(--theme-primary-light, #e0f7fa) !important; /* Highlight color */
    border-color: var(--theme-primary-color, #007bff) !important; /* Stronger border color */
    border-style: solid !important;
}

/* Styles for Sortileges Drop Zone and List */
.sortileges-section {
    /* Inherits from .drop-target */
    /* Ensure it can grow vertically if content wraps */
    min-height: 80px; /* Give it a reasonable starting height */
    overflow-y: auto; /* Add scrollbar if content overflows vertically */
    padding: 10px; /* Add some padding inside the drop zone */
}

.sortileges-section .drop-hint {
    margin-bottom: 10px; /* Space below the hint */
}

.sortileges-item-list {
    display: flex; /* Arrange items horizontally */
    flex-wrap: wrap; /* Allow items to wrap to the next line */
    gap: 10px; /* Space between items */
    list-style: none; /* Remove bullet points */
    padding: 0; /* Remove default padding */
    margin: 0; /* Remove default margin */
    align-items: flex-start; /* Align items to the top of the line */
}

.sortileges-item {
    display: flex; /* Arrange image, name, and controls horizontally within the item */
    align-items: center; /* Vertically align content */
    gap: 5px; /* Space between elements within an item */
    padding: 5px 8px; /* Padding around each item */
    border: 1px solid var(--theme-border-color);
    border-radius: 4px;
    background-color: var(--theme-background-light);
    flex-shrink: 0; /* Prevent items from shrinking */
    box-sizing: border-box; /* Include padding and border in the element's total width and height */
}

/* Ensure internal elements of sortilege item behave correctly */
.sortileges-item .item-image {
    flex-shrink: 0; /* Prevent image from shrinking */
}

.sortileges-item .item-name {
    white-space: nowrap; /* Prevent item name from wrapping */
    overflow: hidden; /* Hide overflow text */
    text-overflow: ellipsis; /* Show ellipsis for overflow text */
    flex-grow: 1; /* Allow name to take available space */
}

.sortileges-item .item-controls {
    display: flex;
    gap: 3px; /* Space between control buttons */
    flex-shrink: 0; /* Prevent controls from shrinking */
}

/* General styling for descriptive groups on sheets */
.actorDesc-group {
    background: var(--theme-background-alt, #f9f9f9);
    padding: 10px;
    border-radius: 4px;
    margin-bottom: 15px;
    border: 1px solid var(--theme-border-color, #ccc);
}
/* General styling for descriptive groups on sheets */
.actorDesc-group {
    background: var(--theme-background-alt, #f9f9f9);
    padding: 10px;
    border-radius: 4px;
    margin-bottom: 15px;
    border: 1px solid var(--theme-border-color, #ccc);
}

/* Styling for talent items */
.talent-item {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 5px;
}

.talent-label {
    font-weight: bold;
    flex-shrink: 0;
}

.talent-value-text {
    font-style: italic;
    color: var(--theme-text-muted);
    flex-shrink: 0;
}

.talent-circles-container.multi-line {
    display: grid;
    grid-template-columns: repeat(10, auto);
    gap: 4px 6px; /* row-gap column-gap */
    justify-content: start;
    align-items: center;
    flex-grow: 1; /* Allow it to take space */
}

/* Styling for Puissance control buttons in Talents Spécifiques */
.puissance-change-btn {
  width: 25px;
  height: 25px;
  font-size: 1.2em;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
  
  /* Theming using CSS variables */
  background: var(--theme-primary-medium);
  color: white;
  border: 1px solid var(--theme-primary-dark);
  border-radius: 3px;
  cursor: pointer;
  transition: background-color 0.2s ease, box-shadow 0.2s ease;
}

.puissance-change-btn:hover {
  background: var(--theme-primary-color);
  box-shadow: 0 0 5px var(--theme-primary-color);
}

/* Custom styling for Abreuvoir Puissance talent circles */
.talents-specifiques-section[data-pouvoir-type="abreuvoir"] .talent-circle {
  width: 12px; /* A bit larger than the default */
  height: 12px; /* A bit larger than the default */
  border: 1px solid var(--theme-primary-medium); /* Use theme color for the border */
}

/* Adjust the filled state color to also match the theme */
.talents-specifiques-section[data-pouvoir-type="abreuvoir"] .talent-circle.filled {
  background-color: var(--theme-primary-color);
  border-color: var(--theme-primary-dark); /* Darker border for filled dots */
}

/* Styling for new item sections in materiel_mat.hbs */
.ingredient-section,
.artefactabyssal-section,
.catalyseur-section,
.miroir-section,
.receptacle-section,
.rune-section,
.sortilege-section {
    /* Inherits from .actorDesc-group */
    margin-bottom: 15px; /* Consistent spacing */
}
